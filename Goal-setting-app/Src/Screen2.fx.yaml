Screen2 As screen:
    OnVisible: |
        =/*resets calendar view and date selection to today*/
                 
        Set(_dateSelected, Today());         
        Set(_firstDayOfMonth, DateAdd(Today(), 1 - Day(Today()), Days));         
        Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));         
        Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));
        Set(_calendarVisible, true);

    LblMonthSelected1_1 As label:
        Align: =Align.Center
        Height: =64
        Size: =21
        Text: =Text(_firstDayOfMonth, "mmmm yyyy")
        Visible: =_calendarVisible
        Width: =Parent.Width
        Wrap: =false
        Y: =118
        ZIndex: =1

    iconPrevMonth1_1 As icon.ChevronLeft:
        Icon: =Icon.ChevronLeft
        OnSelect: |-
            =/*changes month view to previous month*/
                       
            Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, -1, Months));           
            Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));           
            Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));           
            /*collects calendar events for all days in current month view. Updates _minDate to prevent duplicate data collection if user returns to this month view*/           
            If(_minDate > _firstDayOfMonth, Set(_minDate, _firstDayOfMonth);)
        PaddingBottom: =10
        PaddingLeft: =10
        PaddingRight: =10
        PaddingTop: =10
        TabIndex: =0
        Tooltip: ="View previous month"
        Visible: =_calendarVisible
        Width: =91
        Y: =118
        ZIndex: =2

    iconNextMonth1_1 As icon.ChevronRight:
        Icon: =Icon.ChevronRight
        OnSelect: |-
            =/*changes month view to next month*/
                       
            Set(_firstDayOfMonth, DateAdd(_firstDayOfMonth, 1, Months));           
            Set(_firstDayInView, DateAdd(_firstDayOfMonth, -(Weekday(_firstDayOfMonth) - 2 + 1), Days));           
            /*collects calendar events for all days in current month view. Updates _maxDate to prevent duplicate data collection if user returns to this month view*/           
            Set(_lastDayOfMonth, DateAdd(DateAdd(_firstDayOfMonth, 1, Months), -1, Days));           
            If(_lastDayOfMonth > _maxDate, Set(_maxDate, _lastDayOfMonth);)
        PaddingBottom: =10
        PaddingLeft: =10
        PaddingRight: =10
        PaddingTop: =10
        TabIndex: =0
        Tooltip: ="View next month"
        Visible: =_calendarVisible
        Width: =91
        X: =Parent.Width - Self.Width
        Y: =118
        ZIndex: =3

    WeekdayGallery1_1 As gallery.WeekdayGallery:
        AccessibleLabel: ="Days of the week"
        Height: =45
        Items: =Calendar.WeekdaysShort()
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =91
        Visible: =_calendarVisible
        Width: =Parent.Width
        Y: =202
        ZIndex: =4

        Title1_1 As label:
            Align: =Align.Center
            Height: =WeekdayGallery1_1.TemplateHeight
            OnSelect: =Select(Parent)
            Size: =17 * WeekdayGallery1_1.TemplateWidth / 77
            Text: =ThisItem.Value
            VerticalAlign: =Middle
            Width: =WeekdayGallery1_1.TemplateWidth
            Wrap: =false
            X: =WeekdayGallery1_1.TemplateWidth / 2 - Self.Width / 2
            Y: =WeekdayGallery1_1.TemplateHeight / 2 - Self.Height / 2
            ZIndex: =1

    MonthDayGallery1_1 As gallery.MonthDayGallery:
        AccessibleLabel: ="Days of selected month"
        Height: =390
        Items: =[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19, 20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]
        Layout: =Layout.Vertical
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =65
        Visible: =_calendarVisible
        Width: =Parent.Width
        WrapCount: =7
        Y: =247
        ZIndex: =5

        Circle2_1 As circle:
            Height: =Self.Width
            OnSelect: =Select(Parent)
            Visible: |+
                =/*Visible if calendar events are found on this day*/               
                //CountRows(Filter(MyCalendarEvents, DateValue(Text(Start)) = DateAdd(_firstDayInView,ThisItem.Value,Days))) > 0 && !Subcircle1_1.Visible && Title4_1.Visible
                !IsBlank(LookUp(WeeklyTasks, Date = DateAdd(_firstDayInView,ThisItem.Value, Days)).Title)
                
            Width: =6.5
            X: =MonthDayGallery1_1.TemplateWidth / 2 - Self.Width / 2
            Y: =MonthDayGallery1_1.TemplateHeight * (0.75)
            ZIndex: =1

        Subcircle1_1 As circle:
            Height: =3 * Title4_1.Size
            OnSelect: =Select(Parent)
            Visible: =And(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, Title4_1.Visible)
            Width: =Self.Height
            X: =MonthDayGallery1_1.TemplateWidth/2 - Self.Width/2
            Y: =MonthDayGallery1_1.TemplateHeight / 2 - Self.Height / 2
            ZIndex: =2

        Title4_1 As label:
            Align: =Align.Center
            BorderColor: =RGBA(0, 0, 0, 0)
            Color: =If(DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(255, 255, 255, 1), DateAdd(_firstDayInView, ThisItem.Value) = Today(), RGBA(47, 41, 43, 1), LblMonthSelected1_1.Color)
            Fill: |-
                =/*Fill value changes if the gallery item day = today, or if it lies outside of the current month*/             
                If(
                    /*Date selected is today*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today() && DateAdd(_firstDayInView, ThisItem.Value) = _dateSelected, RGBA(0,0,0,0),
                    /*Today when it is not selected*/
                    DateAdd(_firstDayInView, ThisItem.Value) = Today(), ColorFade(Subcircle1_1.Fill, 0.67), 
                    /*The day is outside the range of the currently selected month*/
                    Abs(Self.Text - ThisItem.Value) > 10,RGBA(200, 200, 200, 0.3), RGBA(0, 0, 0, 0))
            FocusedBorderColor: =Self.Color
            FocusedBorderThickness: =2
            Height: =MonthDayGallery1_1.TemplateHeight
            OnSelect: =Set(_dateSelected, DateAdd(_firstDayInView, ThisItem.Value, Days))
            Size: =17 * MonthDayGallery1_1.TemplateWidth / 91
            TabIndex: =0
            Text: =Day(DateAdd(_firstDayInView,ThisItem.Value,Days))
            VerticalAlign: =Middle
            Visible: |-
                =/*This item is in a row containing no days of the visible month. It is in the row after the row where the last day of the month occurs*/ 
                 !(DateAdd(_firstDayInView,ThisItem.Value,Days) - Weekday(DateAdd(_firstDayInView,ThisItem.Value,Days)) + 1 > _lastDayOfMonth)
            Width: =MonthDayGallery1_1.TemplateWidth
            Wrap: =false
            ZIndex: =3

    ScreenLabel_2 As rectangle:
        Height: =118
        Width: =640
        ZIndex: =6

    PageBackButton_3 As icon.Add:
        Color: =RGBA(255, 255, 255, 1)
        Icon: =Icon.BackArrow
        OnSelect: =Back(ScreenTransition.CoverRight);
        X: =23
        Y: =27
        ZIndex: =7

    TitleLabel_2 As label:
        Align: =Align.Center
        Color: =RGBA(255, 255, 255, 1)
        FontWeight: =FontWeight.Bold
        Height: =87
        Size: =40
        Text: ="Calendar"
        Width: =463
        X: =87
        Y: =20
        ZIndex: =8

    GoalsButton_3 As button:
        Fill: =RGBA(224, 20, 131, 1)
        Height: =64
        OnSelect: =Navigate(GoalSetting)
        RadiusBottomLeft: =360
        RadiusBottomRight: =360
        RadiusTopLeft: =360
        RadiusTopRight: =360
        Size: =18
        Text: ="Goals"
        Width: =79
        X: =522
        Y: =31
        ZIndex: =9

    "AfternoonTasksGallery_3 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver4.0'":
        BorderColor: =RGBA(255, 0, 0, 1)
        BorderThickness: =5
        Height: =309
        Items: |+
            =Filter(
                WeeklyTasks,
                Time.Value = "Afternoon",
                Email = User().Email,
                Date = _dateSelected
            )
            
            //Filter(WeeklyTasks, And(Email=varParticipantEmail, Date = _dateSelected))
            
        TemplatePadding: =0
        TemplateSize: =317
        Width: =266
        X: =374
        Y: =826
        ZIndex: =11

        Rectangle8_12 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =278
            OnSelect: =Select(Parent)
            Width: =244
            X: =25
            Y: =3
            ZIndex: =1

        ShortTermGoal_8 As rectangle:
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(232, 244, 217, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =50
            Y: =169
            ZIndex: =2

        "'LongTermGoal Card_8' As rectangle":
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(251, 188, 159, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =51
            Y: =120
            ZIndex: =3

        Image7_12 As image:
            Height: =70
            Image: =afternoon
            OnSelect: =Select(Parent)
            Width: =84
            X: =107
            Y: =12
            ZIndex: =4

        Task_Label_8 As label:
            FontWeight: =FontWeight.Bold
            Height: =28
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =16
            Text: |-
                =ThisItem.'Task To Do'
                //ThisItem.Time.Value
            VerticalAlign: =VerticalAlign.Top
            Width: =205
            X: =64
            Y: =82
            ZIndex: =5

        "'LongTerm Goal Label_6' As label":
            Height: =38
            LineHeight: =1.1
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =12
            Text: =ThisItem.'Long Term Goal'.Value
            VerticalAlign: =VerticalAlign.Top
            Width: =205
            Y: =168
            ZIndex: =6

        "'ShortTerm Goal Label_6' As label":
            Height: =53
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =12
            Text: =ThisItem.'Short Term Goal'
            VerticalAlign: =VerticalAlign.Top
            Width: =172
            X: =145
            Y: =57
            ZIndex: =7

        Task_Date_6 As label:
            FontWeight: =FontWeight.Semibold
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Size: =15
            Text: =ThisItem.Date
            VerticalAlign: =VerticalAlign.Top
            Width: =136
            X: =107
            ZIndex: =8

        Checkbox1_12 As checkbox:
            CheckboxSize: =50
            Height: =46
            OnSelect: =Select(Parent)
            Size: =15
            Text: ="Done!"
            Width: =122
            X: =82
            Y: =221
            ZIndex: =9

    "EveningTasksGallery_4 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver4.0'":
        BorderThickness: =5
        Height: =293
        Items: |-
            =Filter(
                WeeklyTasks,
                Time.Value = "Evening",
                Email = User().Email,
                Date = _dateSelected
            )
        TemplatePadding: =0
        TemplateSize: =258
        Width: =258
        Y: =841
        ZIndex: =12

        Rectangle8_13 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =265
            OnSelect: =Select(Parent)
            Width: =251
            X: =168
            ZIndex: =1

        Image7_13 As image:
            Height: =64
            Image: =evening
            OnSelect: =Select(Parent)
            Width: =65
            X: =261
            ZIndex: =4

        Task_Label_9 As label:
            FontWeight: =FontWeight.Bold
            Height: =64
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: |-
                =ThisItem.'Task To Do'
                //ThisItem.Time.Value
            VerticalAlign: =VerticalAlign.Top
            Width: =203
            X: =216
            Y: =81
            ZIndex: =5

        Checkbox1_13 As checkbox:
            CheckboxSize: =50
            Height: =46
            OnSelect: =Select(Parent)
            Size: =15
            Text: ="Done!"
            Width: =122
            X: =232
            Y: =214
            ZIndex: =9

        "'LongTermGoal Card_9' As rectangle":
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(251, 188, 159, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =197
            Y: =108
            ZIndex: =10

        ShortTermGoal_9 As rectangle:
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(232, 244, 217, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =197
            Y: =161
            ZIndex: =11

    "MorningTasksGallery_5 As gallery.'BrowseLayout_Horizontal_TwoTextOneImageVariant_ver4.0'":
        BorderThickness: =5
        Height: =232
        Items: |-
            =Filter(
                WeeklyTasks,
                Time.Value = "Morning",
                Email = User().Email,
                Date = _dateSelected
            )
        ShowScrollbar: =false
        TemplatePadding: =0
        TemplateSize: =258
        Width: =298
        X: =200
        Y: =594
        ZIndex: =13

        Rectangle8_14 As rectangle:
            Fill: =RGBA(255, 255, 255, 1)
            Height: =228
            OnSelect: =Select(Parent)
            Width: =90
            X: =168
            Y: =32
            ZIndex: =1

        Image7_14 As image:
            Height: =64
            Image: =evening
            OnSelect: =Select(Parent)
            Width: =65
            X: =261
            ZIndex: =4

        Task_Label_10 As label:
            FontWeight: =FontWeight.Bold
            Height: =64
            OnSelect: =Select(Parent)
            PaddingBottom: =0
            PaddingLeft: =0
            PaddingRight: =0
            PaddingTop: =0
            Text: |-
                =ThisItem.'Task To Do'
                //ThisItem.Time.Value
            VerticalAlign: =VerticalAlign.Top
            Width: =203
            X: =216
            Y: =81
            ZIndex: =5

        Checkbox1_14 As checkbox:
            CheckboxSize: =50
            Height: =46
            OnSelect: =Select(Parent)
            Size: =15
            Text: ="Done!"
            Width: =122
            X: =232
            Y: =214
            ZIndex: =9

        "'LongTermGoal Card_10' As rectangle":
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(251, 188, 159, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =197
            Y: =108
            ZIndex: =10

        ShortTermGoal_10 As rectangle:
            BorderColor: =RGBA(232, 244, 217, 1)
            Fill: =RGBA(232, 244, 217, 1)
            Height: =37
            OnSelect: =Select(Parent)
            Width: =192
            X: =197
            Y: =161
            ZIndex: =11

